
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<!-- <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Olivier Barais">
<link rel="author" href="https://plus.google.com/+OlivierBarais">
 
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<link rel="stylesheet" href="/assets/main.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<style>body {
    padding-top: 60px;
  }
  @media (max-width: 979px) {
    body {
      padding-top: 60px;
    }
  }
</style>

<title>category:&nbsp;diversify</title>

<meta name="description" content="Category: diversify">

<!-- Add custom CSS here -->

<!-- <link rel="shortcut icon" href="favicon.ico"> -->
<link rel="icon" href="/favicon.ico">


</head>

<body>

    	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
					<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
                <a class="navbar-brand" href="/">olivier.barais</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse navbar-right navbar-ex1-collapse">
				<ul class="nav navbar-nav">
                    <li><a href="/">Home</a></li>
					<li><a href="/publications/">Publications</a></li>
					<li><a href="/teaching/">Teaching</a></li>
                    <li><a href="/research/">Research</a></li>
                    <li><a href="/blog/">Blog</a></li>
                    <li><a href="/photos/">Photos</a></li>
                    <li><a href="/contact/">Contact</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>


    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <h1 class="category">
                    Category &nbsp;&nbsp; <span class="label label-warning">diversify</span>
                </h1>

                <!-- blog entry -->
                
                <hr>
                <h1>
                    <a href="/blog/posts/docker/diversify/2014/08/23/Mdms_with_docker.html">Running MDMS and MDMS Diversified using docker</a>
                </h1>

                <p class="lead">
                    by <a href="/contact/">Olivier Barais</a> &nbsp;&nbsp;&nbsp;
                     
                        <a href="/blog/categories/docker/"> <span class="label label-primary">docker</span></a> 
                     
                        <a href="/blog/categories/diversify/"> <span class="label label-primary">diversify</span></a> 
                    
                </p>

                <span class="glyphicon glyphicon-time"></span> Posted 2014.08.23  &mdash; Rennes, France 
                <hr>

                <p>I am just finishing the docker image to run <a href="https://github.com/maxleiko/mdms-ringojs">mdms</a> quickly.</p>

<p>To play with it, just pull the following images.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">docker pull barais/mdmsredis <span class="c">#contains the redis databases</span>
docker pull barais/mdmssosies <span class="c">#contains the sosies (it is big)</span>
docker pull barais/nginxsosies <span class="c">#contains nginx and the websocket server for displaying connection</span></code></pre></figure>

<p>To create quickly a cluster of regular mdms worker</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#start nginx</span>
<<<<<<< HEAD
<span class="nb">export </span><span class="nv">ID_REDIS</span><span class="o">=</span><span class="si">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/mdmsredis /usr/bin/redis-server<span class="si">)</span>
<span class="nb">export </span><span class="nv">IP_REDIS</span><span class="o">=</span><span class="sb">`</span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">''</span> <span class="nv">$ID_REDIS</span><span class="sb">`</span> 
<span class="c">#start some sosies</span>
<span class="c">#run just once</span>
<span class="nb">export </span><span class="nv">ID_SOSIES</span><span class="o">=</span><span class="si">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/mdmssosies /bin/bash <span class="nt">-xec</span> <span class="s2">"sed -i "</span>s/172.17.0.8/<span class="nv">$IP_REDIS</span>/g<span class="s2">" /opt/mdms-ringojs/config.json &amp;&amp; /opt/sosies/ringojs-0.10/bin/ringo /opt/mdms-ringojs/tools/fakedb.js"</span><span class="si">)</span>
=======
<span class="nb">export </span><span class="nv">ID_REDIS</span><span class="o">=</span><span class="k">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/mdmsredis /usr/bin/redis-server<span class="k">)</span>
<span class="nb">export </span><span class="nv">IP_REDIS</span><span class="o">=</span><span class="sb">`</span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">''</span> <span class="nv">$ID_REDIS</span><span class="sb">`</span> 
<span class="c">#start some sosies</span>
<span class="c">#run just once</span>
<span class="nb">export </span><span class="nv">ID_SOSIES</span><span class="o">=</span><span class="k">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/mdmssosies /bin/bash <span class="nt">-xec</span> <span class="s2">"sed -i "</span>s/172.17.0.8/<span class="nv">$IP_REDIS</span>/g<span class="s2">" /opt/mdms-ringojs/config.json &amp;&amp; /opt/sosies/ringojs-0.10/bin/ringo /opt/mdms-ringojs/tools/fakedb.js"</span><span class="k">)</span>
>>>>>>> 75a23f596188adf8f158535ae9c3b02a29a64187

<span class="c">#run for each sosies</span>

<span class="k">for </span>i <span class="k">in</span> <span class="o">{</span>1..10<span class="o">}</span>
<span class="k">do
<<<<<<< HEAD
	</span><span class="nb">export </span><span class="nv">ID_SOSIES</span><span class="o">=</span><span class="si">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/mdmssosies /bin/bash <span class="nt">-xec</span> <span class="s2">"sed -i "</span>s/172.17.0.8/<span class="nv">$IP_REDIS</span>/g<span class="s2">" /opt/mdms-ringojs/config.json &amp;&amp; /opt/sosies/ringojs-0.10/bin/ringo /opt/mdms-ringojs/main.js"</span><span class="si">)</span>
=======
	</span><span class="nb">export </span><span class="nv">ID_SOSIES</span><span class="o">=</span><span class="k">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/mdmssosies /bin/bash <span class="nt">-xec</span> <span class="s2">"sed -i "</span>s/172.17.0.8/<span class="nv">$IP_REDIS</span>/g<span class="s2">" /opt/mdms-ringojs/config.json &amp;&amp; /opt/sosies/ringojs-0.10/bin/ringo /opt/mdms-ringojs/main.js"</span><span class="k">)</span>
>>>>>>> 75a23f596188adf8f158535ae9c3b02a29a64187
	<span class="nb">export </span><span class="nv">IP_SOSIES</span><span class="o">=</span><span class="sb">`</span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">''</span> <span class="nv">$ID_SOSIES</span><span class="sb">`</span>
	<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$IPS_WORKER</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then </span><span class="nb">export </span><span class="nv">IPS_WORKER</span><span class="o">=</span><span class="nv">$IP_SOSIES</span><span class="p">;</span> <span class="k">else </span><span class="nb">export </span><span class="nv">IPS_WORKER</span><span class="o">=</span><span class="s2">"</span><span class="nv">$IP_SOSIES</span><span class="s2">;</span><span class="nv">$IPS_WORKER</span><span class="s2">"</span><span class="p">;</span> <span class="k">fi  
done</span>

<span class="c">#start some nginx and websocket server</span>
<<<<<<< HEAD
<span class="nb">export </span><span class="nv">ID_NGINX</span><span class="o">=</span><span class="si">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/nginxsosies /main <span class="nv">$IPS_WORKER</span><span class="si">)</span> <span class="c">#you can add a second parameter for the public name of your website e.g. cloud.diversify.org</span>
=======
<span class="nb">export </span><span class="nv">ID_NGINX</span><span class="o">=</span><span class="k">$(</span>docker  run <span class="nt">-i</span> <span class="nt">-d</span> <span class="nt">-t</span> barais/nginxsosies /main <span class="nv">$IPS_WORKER</span><span class="k">)</span> <span class="c">#you can add a second parameter for the public name of your website e.g. cloud.diversify.org</span>
>>>>>>> 75a23f596188adf8f158535ae9c3b02a29a64187
<span class="nb">export </span><span class="nv">IP_NGINX</span><span class="o">=</span><span class="sb">`</span>docker inspect <span class="nt">--format</span><span class="o">=</span><span class="s1">''</span> <span class="nv">$ID_NGINX</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="nv">$IP_NGINX</span>
</code></pre></div></div>

<p>To create quickly a cluster of diversified mdms workers:</p>

 <a class="btn btn-primary" href="/blog/posts/docker/diversify/2014/08/23/Mdms_with_docker.html">Read More <span
                    class="glyphicon glyphicon-chevron-right"></span></a> 

            </div>
            <div class="col-md-4">
                <!-- <div class="col-md-4"> -->
    <!--              
    <div class="well">
        <h4>Blog Search</h4>
        <div class="input-group">
            <input type="text" class="form-control">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button">
                    <span class="glyphicon glyphicon-search"></span>
                </button>
            </span>
        </div>
    </div>
    -->

    

    <div class="well">
        <div class="row">
            <div class="col-lg-6">
                <h4>All Tags</h4>
                <ul class="list-unstyled">
                    <li><a href="/blog/">All</a></li> 
                    <li><a href="/blog/categories/first-post/">first-post</a></li> 
                    <li><a href="/blog/categories/jekyll/">jekyll</a></li> 
                    <li><a href="/blog/categories/github-pages/">github-pages</a></li> 
                    <li><a href="/blog/categories/teaching/">teaching</a></li> 
                    <li><a href="/blog/categories/markdown/">markdown</a></li> 
                    <li><a href="/blog/categories/untidy/">untidy</a></li> 
                    <li><a href="/blog/categories/website/">website</a></li> 
                    <li><a href="/blog/categories/docker/">docker</a></li> 
                    <li><a href="/blog/categories/cloud/">cloud</a></li> 
                    <li><a href="/blog/categories/diversify/">diversify</a></li> 
                    <li><a href="/blog/categories/eclipse/">eclipse</a></li> 
                    <li><a href="/blog/categories/istic/">istic</a></li> 
                    <li><a href="/blog/categories/m2/">m2</a></li> 
                    <li><a href="/blog/categories/french/">french</a></li> 
                    <li><a href="/blog/categories/ensai/">ensai</a></li> 
                    <li><a href="/blog/categories/kevoree/">kevoree</a></li> 
                    <li><a href="/blog/categories/kevoreejs/">kevoreejs</a></li> 
                    <li><a href="/blog/categories/edison/">edison</a></li> 
                    <li><a href="/blog/categories/angularjs/">angularjs</a></li> 
                    <li><a href="/blog/categories/jquery/">jquery</a></li> 
                    <li><a href="/blog/categories/jhipster/">jhipster</a></li> 
                    <li><a href="/blog/categories/sdn/">sdn</a></li> 
                    <li><a href="/blog/categories/opendaylight/">opendaylight</a></li> 
                    <li><a href="/blog/categories/software engineering/">software engineering</a></li> 
                    <li><a href="/blog/categories/ejcp/">ejcp</a></li> 
                    <li><a href="/blog/categories/swarm/">swarm</a></li> 
                    <li><a href="/blog/categories/go-docker/">go-docker</a></li> 
                    <li><a href="/blog/categories/raspberry pi/">raspberry pi</a></li> 
                    <li><a href="/blog/categories/javascript/">javascript</a></li> 
                    <li><a href="/blog/categories/java/">java</a></li> 
                    <li><a href="/blog/categories/slides/">slides</a></li> 
                    <li><a href="/blog/categories/reveal.js/">reveal.js</a></li> 
                    <li><a href="/blog/categories/powerpoint/">powerpoint</a></li> 
                    <li><a href="/blog/categories/migration/">migration</a></li> 
                    <li><a href="/blog/categories/labfab/">labfab</a></li> 
                    <li><a href="/blog/categories/api-platform/">api-platform</a></li> 
                    <li><a href="/blog/categories/symfony3/">symfony3</a></li> 
                    <li><a href="/blog/categories/ng2/">ng2</a></li> 
                    <li><a href="/blog/categories/angularjs2/">angularjs2</a></li> 
                    <li><a href="/blog/categories/rpi/">rpi</a></li> 
                    <li><a href="/blog/categories/raspberrypi/">raspberrypi</a></li> 
                    <li><a href="/blog/categories/raspberry/">raspberry</a></li> 
                    <li><a href="/blog/categories/swagger/">swagger</a></li> 
                    <li><a href="/blog/categories/curl/">curl</a></li> 
                    <li><a href="/blog/categories/authentification/">authentification</a></li> 
                    <li><a href="/blog/categories/l1/">l1</a></li> 
                    <li><a href="/blog/categories/OpenWRT/">OpenWRT</a></li> 
                    <li><a href="/blog/categories/Camera/">Camera</a></li> 
                    <li><a href="/blog/categories/Canon/">Canon</a></li> 
                    <li><a href="/blog/categories/JHipster/">JHipster</a></li> 
                    <li><a href="/blog/categories/Hibernate/">Hibernate</a></li> 
                    <li><a href="/blog/categories/EclipseLink/">EclipseLink</a></li> 
                    <li><a href="/blog/categories/Diversity/">Diversity</a></li> 
<<<<<<< HEAD
                    <li><a href="/blog/categories/esir/">esir</a></li> 
                    <li><a href="/blog/categories/mdi/">mdi</a></li> 
=======
>>>>>>> 75a23f596188adf8f158535ae9c3b02a29a64187
                </ul>
            </div>
        </div>
    </div>

    <div class="well">
        <h4>Remark</h4>
        <p>Sorry, no comments enabled for now because I'm using a simple static site generator (maybe I'll try out disqus another day).</p>
        <p>
            But if you like what you see, send me an <a href="/contact/">email</a>.
        </p>
    </div>
<!-- </div> -->

            </div>
        </div>
    </div>

    <hr>
    <div class="banner"> 
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <!--                     <h2>You can check me out on</h2> -->
                <h2>Find me on</h2>
            </div>
            <div class="col-lg-9">
                <ul class="list-inline banner-social-buttons">
                    <li><a href="http://www.linkedin.com/in/olivierbarais" class="btn btn-default btn-lg"><i class="fa fa-linkedin-square fa-fw"></i>
                            <span class="network-name">Linkedin</span></a></li>
                    <li><a href="https://github.com/barais" class="btn btn-default btn-lg"><i class="fa fa-github-square fa-fw"></i> <span
                            class="network-name">Github</span></a></li>
                    <li><a href="http://scholar.google.fr/citations?user=LV5i8X4AAAAJ&hl=en" class="btn btn-default btn-lg"><i
                            class="fa fa-search fa-fw"></i> <span class="network-name">Scholar</span></a></li>
                    <li><a href="https://www.google.com/+OlivierBarais?rel=author" class="btn btn-default btn-lg"><i
                            class="fa fa-google-plus-square fa-fw"></i> <span class="network-name">google+</span></a></li>
                    <li><a href="https://www.facebook.com/obarais" class="btn btn-default btn-lg"><i
                            class="fa fa-facebook-square fa-fw"></i> <span class="network-name">facebook</span></a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->

</div>
<!-- /.banner -->

<footer>
    <div class="container">
        <div class="span12 pagination-centered" style="text-align: center">
            <div class="row">
                <div class="col-lg-12">
                    <ul class="list-inline">
                        <li><a href="/">Home</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <!-- 						<li><a href="#about">About</a></li>
							<li class="footer-menu-divider">&sdot;</li>
	                    -->
                        <li><a href="/publications/">Publications</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/teaching/">Teaching</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/research/">Research</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/blog/">Blog</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/photos/">Photos</a></li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li><a href="/contact/">Contact</a></li>
                    </ul>

                    <p class="copyright text-muted small">
                        <a href="http://validator.w3.org/check?uri=referer"><img src="/img/valid-html401.png"
                            alt="Valid HTML 4.01 Frameset" height="20" width="57"></a> Built using <a href="http://jekyllrb.com/">Jekyll</a>, <a
                            href="http://twitter.github.com/bootstrap/">Bootstrap</a> and <a href="http://startbootstrap.com">Startbootstrap</a> from <a href="http://rudametw.github.io/">Walter Rudametkin's template</a>. All
                        source code available <a href="https://github.com/barais/barais.github.io"> here</a>. 
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>




</body>
</html>
