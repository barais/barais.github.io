<p>Hello très chers étudiants,</p>

<p>Pour ce premier TP de GLI, nous allons étudier GWT. Pour la mise en place de l’environnement, la compilation, le lancement du serveur …, nous utiliserons <a href="http://maven.apache.org/">maven</a>.</p>

<h3 id="etape-0-cration-du-projet">Etape 0: Création du projet</h3>

<p>Pour démarrer, nous pouvons utiliser l’<a href="http://mojo.codehaus.org/gwt-maven-plugin/">archetype maven gwt</a>.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mvn archetype:generate <span class="se">\</span>
   -DarchetypeGroupId<span class="o">=</span>org.codehaus.mojo <span class="se">\</span>
   -DarchetypeArtifactId<span class="o">=</span>gwt-maven-plugin <span class="se">\</span>
   -DarchetypeVersion<span class="o">=</span>2.6.1</code></pre></div>

<!--more-->

<p>Renseignez alors, le groupeId, l’artefactId, la version, le package par défaut, et le nom du module gwt que vous souhaitez créer.</p>

<p>Testez la compilation</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mvn gwt:generateAsync gwt:i18n compile gwt:compile package</code></pre></div>

<p>Attention, à chaque fois que vous touchez aux interfaces de services ou aux messages, vous devrez regénérer le code Java des interfaces Async ou des messages en tapant.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mvn gwt:generateAsync gwt:i18n</code></pre></div>

<h3 id="etape-1-installation-eclipse">Etape 1: Installation eclipse</h3>
<p>Dans eclipse, il existe un certains nombre de <a href="https://developers.google.com/eclipse/docs/getting_started?hl=fr">plugins</a> que vous pouvez installer, ils ne sont pas nécessairement requis. Entres autres, le designer peut intéresser certains d’entres vous.</p>

<h3 id="etape-2-import-du-projet">Etape 2: Import du projet</h3>
<p>Dans eclipse, importez votre projet maven:</p>

<p>File -&gt; Import -&gt; maven -&gt; Existing maven project.</p>

<p>Séléctionnez le répertoire de votre projet. Il expliquera qu’il ne sait pas gérer la tâche gwt:.., séléctionner <em>ignore add to pom</em>.</p>

<h3 id="etape-3-premier-dmarrage-du-projet--laide-du-super-dev-mode">Etape 3: Premier démarrage du projet à l’aide du super dev mode</h3>
<p>Dans la description de votre projet, (fichier gwt.xml dans le répertoire <em>ressources</em>), ajoutez les lignes suivantes avant la clôture de la balise module.</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;add-linker</span> <span class="na">name=</span><span class="s">&quot;xsiframe&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;set-configuration-property</span> <span class="na">name=</span><span class="s">&quot;devModeRedirectEnabled&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span></code></pre></div>

<p>Puis vous pouvez lancer</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mvn gwt:run-codeserver</code></pre></div>

<p>et dans un autre onglet</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mvn gwt:run</code></pre></div>

<p>Allez à l’adresse : <a href="http://localhost:9876/">http://localhost:9876/</a></p>

<p>Mettez <em>dev mode on</em> et <em>dev mode off</em> comme des <em>bookmarks</em> de votre navigateur.</p>

<p>Puis allez à l’adresse : <a href="http://127.0.0.1:8888/MODULE.html">http://127.0.0.1:8888/MODULE.html</a> en remplaçant module par le nom de votre module. Cliquez sur le bookmark <em>devmodeon</em> que vous venez de créer, vous devriez pouvoir recompiler votre code à la volée. Si vous touchez au code côté serveur, vous pouvez rechargez jetty depuis le deuxième onglet de la fenètre qui est apparue au lancement de <em>mvn gwt:run</em>.</p>

<p>Pour activer le lien entre les sources Java et le debug javascript</p>

<p>Ajoutez la ligne suivante à votre fichier gwt.xml</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;set-property</span> <span class="na">name=</span><span class="s">&quot;compiler.useSourceMaps&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span></code></pre></div>

<ol>
  <li><em>Open chrome dev tools</em></li>
  <li><em>Open Settings (gear in bottom right of dev tools)</em></li>
  <li><em>In “Source” section, enable source maps</em>
<em>If you notice you can navigate and step through both the Java code and jsni methods (something that was never available before). Also, recompiling the module is as easy as clicking “Dev Mode On” again and compiling the new module. Compilations are much quicker than full GWT compiles. The incremental builds save a lot of time.</em></li>
</ol>

<p><em>Even if the Eclipse/IntelliJ plugin paired with chrome’s plugin are good enough for you, source maps still have some advantages. Source maps appear to be a new techonology that will be used more and more, so getting familiar with using it now should benefit you in the future.</em></p>

<h3 id="etape-4-dveloppez-votre-projet">Etape 4: Développez votre projet</h3>

<p>Créer une interface web pour le projet DoodleBlablaCar (Sujet de Taa)</p>

<p>J’ai mis un exemple GWT qui attaque des services Restful (Json + Jersey). sur <a href="https://github.com/barais/taajerseygwt.git">github</a></p>

<p>J’ai aussi mis un exemple GWT + SmartGWT + superdev mode ici <a href="https://github.com/barais/smartgwt5maven.git">github</a></p>

<p>Have fun ;)</p>

